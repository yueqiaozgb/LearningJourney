# InnoDB存储引擎

InnoDB 是 MySQL 数据库中最重要且广泛使用的存储引擎，在设计上采用了类似Oracle的架构，支持完整的**ACID事务**、**行锁设计**、**支持MVCC**，**支持外键**、提供类似于Oracle风格的一致性非锁定读。



## InnoDB核心特性 

|     **特性**      |                           **说明**                           |
| :---------------: | :----------------------------------------------------------: |
| **ACID 事务支持** | 提供原子性（Atomicity）、一致性（Consistency）、隔离性（Isolation）、持久性（Durability），确保复杂操作的数据安全 |
|    **行级锁**     | 锁粒度细至数据行（而非表级锁），降低并发冲突，支持高吞吐量的读写操作 |
|     **MVCC**      | 多版本并发控制（Multi-Version Concurrency Control），通过版本快照实现非阻塞读 |
|   **外键约束**    |      强制维护表间引用完整性，自动处理级联更新/删除操作       |
|   **崩溃恢复**    | 通过 Redo Log（重做日志）和 Undo Log（回滚日志）实现快速故障恢复 |
|   **聚簇索引**    |  数据按主键顺序物理存储，主键查询极快，但二级索引需回表查询  |



## InnoDB 的存储结构

**表空间（Tablespace）**

- **系统表空间（ibdata1）**：存储元数据、Undo Log、Double Write Buffer（防止页断裂）。
- **独立表空间（.ibd 文件）**：每个表单独存储数据与索引（MySQL 5.6+ 默认启用），便于管理

**内存结构**

- **Buffer Pool**：缓存热数据页，减少磁盘 I/O。通过 LRU 算法管理淘汰策略
- **Change Buffer**：缓存非唯一索引的变更（Insert/Update/Delete），提升写性能
- **Log Buffer**：临时存储 Redo Log，定期刷盘。

**日志文件**

- **Redo Log**：记录物理操作，用于崩溃恢复（保证持久性）
- **Undo Log**：记录事务前的数据镜像，用于回滚和 MVCC